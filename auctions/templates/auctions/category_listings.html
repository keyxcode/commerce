{% extends "auctions/layout.html" %}

{% block left-body %}
    <h5>Categories</h5>
    <div class="list-group">
        {% for category in categorys %}
            <a class="list-group-item list-group-item-action style-a" href="{% url 'category_listings' category.id %}">
                {{ category }}
            </a>
        {% endfor %}    
    </div>
{% endblock %}

{% block body %}
    <h2 class="my-3">Category: {{ category}}</h2>
    <hr>
    {% for listing in listings %}
    <div class="row gx-5">
        <div class="col-md-3 border">
            <a href="{% url 'listing' listing.id %}">
            {% if listing.image_url %}
                <img src="{{ listing.image_url }}" class="h-100 w-100" alt="product-image">
            {% else %}
                <img src="https://st2.depositphotos.com/2586633/46477/v/380/depositphotos_464771766-stock-illustration-no-photo-or-blank-image.jpg" class="h-100 w-100" alt="product-image">
            {% endif %}
            </a>
        </div>
        <div class="col-md-9">
            <a href="{% url 'listing' listing.id %}">
                <div class="row h5">
                    {{ listing.title }}
                </div>
            </a>
            <div class="row font-italic h3">
                {% if listing.current_price %}
                    ${{ listing.current_price }}
                {% else %}
                    ${{ listing.starting_bid }}
                {% endif %}
            </div>
            <div class="row text-muted">
                {% if listing.num_bids == 1 %}
                    {{ listing.num_bids }} bid
                {% else %}
                    {{ listing.num_bids }} bids
                {% endif %}
            </div>
            <div class="row">
                <span class="ps-0">
                    Category:
                    <a class="style-a" href="{% url 'category_listings' listing.category.id %}">
                        {{ listing.category }} 
                    </a>
                </span>
            </div>
        </div>
    </div>
    <hr>
    {% endfor %}
{% endblock %}